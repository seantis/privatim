<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html
        xmlns="http://www.w3.org/1999/xhtml"
        xmlns:metal="http://xml.zope.org/namespaces/metal"
         i18n:domain="privatim">

<!-- 'Add comment' component. -->
<metal:block define-macro="add_comment_form">
    <div class="col-8 mt-4">
        <div class="card border-0">
            <form enctype="multipart/form-data" method="POST" action="${add_comment_route_name}">
                <input type="hidden" name="csrf_token" value="${layout.csrf_token()}"/>
                <div class="d-flex w-100">
                    <img class="rounded-circle shadow-1-strong me-3"
                         src="${request.user_pic}"
                         alt="avatar"
                         width="40"
                         height="40"
                    />
                    <div class="flex-grow-1">
                        <div class="inputField">
                        ${form.content(placeholder=" ")}
                            <span i18n:translate="">Message</span>
                        </div>
                    </div>
                </div>
                <div class="d-flex justify-content-end mt-2 pt-1">
                        ${form.submit()}
                </div>
            </form>
        </div>
    </div>
</metal:block>


<!-- Render all the comments. -->
<metal:block define-macro="display_comments">
    <div class="col-8" tal:condition="comments" tal:repeat="comment comments">

        <div class="card border-0 comment-card-wrapper">
            <div class="card-body">
                <div class="d-flex flex-start align-items-center">
                    <img class="rounded-circle shadow-1-strong me-3"
                         src="${request.user_pic}"
                         alt="avatar"
                         width="60"
                         height="60"
                    />
                    <div>
                        <h6 class="fw-bold text-primary mb-1">
                            <a href="${request.route_url('person', id=comment.user.id)}">${comment.user.fullname or comment.user.email}</a>
                        </h6>
                        <p class="text-muted small mb-0">
                                ${layout.format_date(comment.created, 'relative')}
                        </p>
                    </div>
                </div>
                <p class="comment-render-field mt-3 mb-4 pb-2">
                        ${comment.content}
                </p>
                <div class="small d-flex">
                    <a href="#!" class="d-flex align-items-center me-3" id="commentExpand">
                        <i class="far fa-comment-dots me-2"></i>
                        <p i18n:translate="" class="mb-0">Answer</p>
                    </a>
                </div>
            </div>
        </div>
        <hr class="hr"/>
    </div>
</metal:block>
</html>